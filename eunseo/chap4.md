## 카프카 상세 개념 설명

4.1.1 적정 파티션 개수 
- 프로듀서 전송 데이터량 < 컨슈머 데이터 처리량 X 파티션 개수
- 메세지 키 사용할 경우 파티션 개수가 달라지면 이미 매칭된 파티션과 메세지 키의 매칭이 깨지고 전혀 다른 파티션에 데이터가 할당되므로 순서 보장 x 
  
4.1.2 토픽 정리 정책
```
cleanup.policy = delete -> 영구삭제 
               = compact -> 메세지 키 기준으로 오래된 데이터 삭제 
```

4.1.3 ISR(In-Sync-Replicas)
- 리더 파티션과 팔로워 파티션이 모두 싱크가 된 상태
- replica.lag.time.max.ms: 팔로워 파티션이 데이터를 복제하는지 확인하는 주기

  ⇒ 데이터를 가져가지 않으면 문제가 생겼다고 판단하고 ISR 그룹에서 제외

 
- ISR 그룹: 팔로워 파티션은 리더로 선출될 자격을 가진다.
- ISR로 묶이지 못한 팔로워 파티션: 리더로 선출될 자격이 없다.

⇒ unclean.leader.election.enable = true로 설정하면 ISR로 묶이지 못한 팔로워 파티션도 리더로 선출할 수 있다.

 
```
unclean.leader.election.enable 옵션
일부 데이터가 유실되어도 무중단 운영이 필요한 경우 → true
데이터가 유실되면 안되는 경우 → false
```
 
